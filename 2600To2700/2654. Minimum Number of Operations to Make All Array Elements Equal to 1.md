# 2654. Minimum Number of Operations to Make All Array Elements Equal to 1

題目網址 : [2654. Minimum Number of Operations to Make All Array Elements Equal to 1](https://leetcode.com/problems/minimum-number-of-operations-to-make-all-array-elements-equal-to-1/description/?envType=daily-question&envId=2025-11-12)

## 題目描述

You are given a **0-indexed** array `nums` consisiting of **positive** integers. You can do the following operation on the array **any** number of times:

- Select an index `i` such that `0 <= i < n - 1` and replace either of `nums[i]` or `nums[i+1]` with their gcd value.

Return _the **minimum** number of operations to make all elements of_ `nums` _equal to_ `1`. If it is impossible, return `-1`.

The gcd of two integers is the greatest common divisor of the two integers.

## 限制條件

- `2 <= nums.length <= 50`
- <code>1 <= nums[i] <= 10<sup>6</sup></code>

## 解題思路

對所有的數字做 GCD 的運算後，如果最後的 GCD 不為 1 則代表條件不可完成，回傳 -1
如果存在本身已為 1 的數，則可直接回傳 n - `number of one` 的結果

如果以上兩個條件都檢查過了後，可以找出一個最短的區間使 GCD 能以最短操作數變為 1
在區間中只需 `min_length - 1` 次即可得到一個為 1 的 gcd
有了 1 的數字後，剩下的數字也只需 `n - 1` 次，所以結果是 `min_length + n - 2`

## Code

C++版本

```C++
class Solution {
public:
    int minOperations(vector<int>& nums) {
        int n = nums.size();
        int num1 = 0;
        int g = 0;
        for (int x : nums) {
            if (x == 1) {
                num1++;
            }
            g = gcd(g, x);
        }
        if (num1 > 0) {
            return n - num1;
        }
        if (g > 1) {
            return -1;
        }

        int min_len = n;
        for (int i = 0; i < n; i++) {
            int g = 0;
            for (int j = i; j < n; j++) {
                g = gcd(g, nums[j]);
                if (g == 1) {
                    min_len = min(min_len, j - i + 1);
                    break;
                }
            }
        }
        return min_len + n - 2;
    }
};
```

C# 版本

```C#

```

Go 版本

```go

```
